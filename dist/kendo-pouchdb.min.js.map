{"version":3,"file":"kendo-pouchdb.min.js","sources":["../kendo-pouchdb.js"],"names":["f","define","PouchDB","pouchCollate","Error","$","queryPlugins","MAPREDUCE","POUCHDBFIND","pouchdbTransport","kendo","data","RemoteTransport","extend","init","options","pouchdb","db","idField","queryPlugin","defaultView","fieldViews","allQueryPlugins","map","plugin","indexOf","format","this","dataSource","fn","call","push","callbacks","that","changes","since","live","include_docs","filter","undefined","view","on","change","datasourceItem","currentCrudPromises","_crudPromises","slice","doc","when","apply","then","deleted","pushDestroy","get","_id","_rev","pushUpdate","pageSize","pushCreate","err","read","applyFilter","applyPaging","skip","filterQueryOptions","sort","mapreduce","pouchdbfind","fieldViewAndDir","_getFieldViewAndDirForSort","findSelector","_kendoFilterToFindSelector","findSort","_kendoSortToFindSort","filterGoodForAllDocs","_isEmptyFilter","_isIdRangeFilter","sortGoodForAllDocs","_isEmptySort","_isIdSort","useAllDocs","getQueryMethodByQueryPlugin","query","bind","fieldView","find","queryMethod","allDocs","limit","page","countDocsToSubtract","utils","Promise","resolve","startkey","endkey","result","rows","length","_validateFilter","_getFilterQueryOptions","descending","queryOptions","selector","applyTotalRowsOnResponse","response","totalRowsToSubtract","total_rows","each","totalQueryOptions","reduce","totalResult","success","error","status","message","_crud","type","operation","deferred","Deferred","crudPromise","promise","resolveCrudDeferred","index","splice","rev","console","log","create","toIndexableString","d","put","update","destroy","remove","filters","filterField","field","filterOperator","operator","dir","sortField","filterValue","value","key","inclusive_end","_fieldToFindField","_valueToIndexable","$and","expression","$exists","_kendoFilterToFindSelectorInternal","logic","combinationOperator","conditions","convertOperator","condition","argument","order","pouchdbSchema","docs","row","total","schemas","transports","PouchableDataSource","DataSource","opts","Model","_ispouchdb","schema","model","id","serverPaging","serverFiltering","serverSorting","serverGrouping","serverAggregates","newArgs","Array","prototype","arguments","unshift","getByModelId","window","jQuery","amd","_"],"mappings":"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"}