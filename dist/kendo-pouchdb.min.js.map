{"version":3,"file":"kendo-pouchdb.min.js","sources":["../kendo-pouchdb.js"],"names":["f","define","PouchDB","pouchCollate","Error","$","queryPlugins","MAPREDUCE","POUCHDBFIND","pouchdbTransport","kendo","data","RemoteTransport","extend","init","options","pouchdb","db","idField","queryPlugin","defaultView","fieldViews","allQueryPlugins","map","plugin","indexOf","format","this","dataSource","fn","call","push","callbacks","that","changes","since","live","include_docs","filter","undefined","view","on","change","datasourceItem","currentCrudPromises","_crudPromises","slice","doc","when","apply","then","deleted","pushDestroy","get","_id","_rev","pushUpdate","pageSize","pushCreate","err","read","applyFilter","applyPaging","skip","filterQueryOptions","sort","mapreduce","pouchdbfind","fieldViewAndDir","_getFieldViewAndDirForSort","findSelector","_kendoFilterToFindSelector","findSort","_kendoSortToFindSort","filterGoodForAllDocs","_isEmptyFilter","_isIdRangeFilter","sortGoodForAllDocs","_isEmptySort","_isIdSort","useAllDocs","getQueryMethodByQueryPlugin","query","bind","fieldView","find","queryMethod","allDocs","limit","page","countDocsToSubtract","utils","Promise","resolve","startkey","endkey","result","rows","length","_validateFilter","_getFilterQueryOptions","descending","queryOptions","selector","applyTotalRowsOnResponse","response","totalRowsToSubtract","total_rows","each","totalQueryOptions","reduce","totalResult","success","error","status","_crud","type","operation","deferred","Deferred","crudPromise","promise","resolveCrudDeferred","index","splice","rev","console","log","create","toIndexableString","d","put","update","destroy","remove","filters","filterField","field","filterOperator","operator","dir","sortField","filterValue","value","key","inclusive_end","_fieldToFindField","_valueToIndexable","$and","expression","$exists","_kendoFilterToFindSelectorInternal","logic","combinationOperator","conditions","convertOperator","condition","argument","order","pouchdbSchema","docs","row","total","schemas","transports","PouchableDataSource","DataSource","Model","_ispouchdb","schema","model","id","serverPaging","serverFiltering","serverSorting","serverGrouping","serverAggregates","arguments","getByModelId","window","jQuery","amd","_"],"mappings":";;CAEA,SAAWA,EAAGC,GACVA,GAAQ,UAAW,gBAAiBD,IACrC,SAAUE,EAASC,GAElB,IAAKD,EACD,KAAM,IAAIE,OAAM,mDAGpB,KAAKD,EACD,KAAM,IAAIC,OAAM,2DAgnBpB,OA7mBA,UAAWC,GAEP,GAAIC,IACIC,UAAW,YACXC,YAAa,gBAIjBC,EAAmBC,MAAMC,KAAKC,gBAAgBC,QAC1CC,KAAM,SAAUC,GACZ,GAAIC,GAAUD,GAAWA,EAAQC,QAAUD,EAAQC,WAC/CC,EAAKD,EAAQC,GACbC,EAAUF,EAAQE,QAClBC,EAAcH,EAAQG,aAAeb,EAAaC,UAClDa,EAAcJ,EAAQI,YACtBC,EAAaL,EAAQK,UAEzB,KAAKJ,EACD,KAAM,IAAIb,OAAM,+BAGpB,MAAMa,YAAcf,IAChB,KAAM,IAAIE,OAAM,4CAGpB,KAAKc,EACD,KAAM,IAAId,OAAM,oCAGpB,IAAIkB,GAAkBjB,EAAEkB,IAAIjB,EAAc,SAAUkB,GAAU,MAAOA,IACrE,IAAIF,EAAgBG,QAAQN,GAAe,EACvC,KAAM,IAAIf,OAAMM,MAAMgB,OAAO,sCAAuCP,GAGxE,IAAIA,IAAgBb,EAAaE,aAAeY,EAC5C,KAAM,IAAIhB,OAAMM,MAAMgB,OAAO,uDAAwDP,GAGzF,IAAIA,IAAgBb,EAAaE,aAAea,EAC5C,KAAM,IAAIjB,OAAMM,MAAMgB,OAAO,sDAAuDP,GAGxFQ,MAAKV,GAAKA,EACVU,KAAKT,QAAUA,EACfS,KAAKR,YAAcA,EACnBQ,KAAKP,YAAcA,EACnBO,KAAKN,WAAaA,MAClBM,KAAKC,WAAab,EAAQJ,KAAKiB,WAE/BlB,MAAMC,KAAKC,gBAAgBiB,GAAGf,KAAKgB,KAAKH,KAAMZ,IAGlDgB,KAAM,SAAUC,GAEZ,GAAIC,GAAON,KACPO,EAAUP,KAAKV,GAAGiB,SACdC,MAAO,MACPC,MAAM,EACNC,cAAc,EACdC,OAAQL,EAAKb,YAAc,QAAUmB,OACrCC,KAAMP,EAAKb,aAInBc,GAAQO,GAAG,SAAU,SAAUC,GAG3B,GAEIC,GAFAC,EAAsBX,EAAKY,cAAcC,QACzCC,EAAML,EAAOK,GAIjB1C,GAAE2C,KAAKC,MAAM5C,EAAGuC,GAAqBM,KAAK,WACtC,GAAIR,EAAOS,QACPnB,EAAUoB,YAAYL,OAYtB,IAHAJ,EAAiBV,EAAKL,WAAWyB,IAAIN,EAAIO,KAGlBf,SAAnBI,EAA8B,CAE9B,GAAII,EAAIQ,OAASZ,EAAeY,KAK5B,MAHAvB,GAAUwB,WAAWT,OAOpBd,GAAKL,WAAW6B,YACjBzB,EAAU0B,WAAWX,OAOzCb,EAAQO,GAAG,QAAS,SAAUkB,OAOlCC,KAAM,SAAU7C,GAGZ,GAoBI8C,GACAC,EACAC,EAYAC,EAlCA/B,EAAON,KACPW,EAASvB,EAAQJ,KAAK2B,OACtB2B,EAAOlD,EAAQJ,KAAKsD,KACpBC,EAAYjC,EAAKd,cAAgBb,EAAaC,UAC9C4D,EAAclC,EAAKd,cAAgBb,EAAaE,YAChD4D,EAAkBF,EAAYjC,EAAKoC,2BAA2BJ,GAAQ1B,OACtE+B,EAAeH,EAAclC,EAAKsC,2BAA2BjC,EAAQ2B,GAAQ1B,OAC7EiC,EAAWL,EAAclC,EAAKwC,qBAAqBR,GAAQ1B,OAC3DmC,EAAuBzC,EAAK0C,eAAerC,IAAY4B,GAAajC,EAAK2C,iBAAiBtC,GAC1FuC,EAAqB5C,EAAK6C,aAAab,IAAShC,EAAK8C,UAAUd,GAC/De,EAAaN,GAAwBG,IAAuB5C,EAAKb,cAAgBkD,EACjFW,EAA8B,WAC1B,GAAIf,EACA,MAAOjC,GAAKhB,GAAGiE,MAAMC,KAAKlD,EAAKhB,GAAImD,EAAgBgB,UAChD,IAAIjB,EACP,MAAOlC,GAAKhB,GAAGoE,IAEnB,MAAM,IAAIjF,OAAMM,MAAMgB,OAAO,mCAAoCO,EAAKd,eAE1EmE,EAAcN,EAAa/C,EAAKhB,GAAGsE,QAAUN,IAI7CO,EAAQzE,EAAQJ,KAAK8C,SACrBgC,EAAO1E,EAAQJ,KAAK8E,KAEpBC,EAAsB,WAClB,OAAKV,GAAcnB,EACR3D,EAAQyF,MAAMC,QAAQC,QAAQ,GAElC5D,EAAKhB,GAAGsE,SAAUO,SAAU,WAAYC,OAAQ,aAAmB7C,KAAK,SAAU8C,GACrF,MAAOA,GAAOC,KAAKC,SAK/BjE,GAAKkE,gBAAgBpF,EAAQJ,KAAK2B,OAAQvB,EAAQJ,KAAKsD,MACvDD,EAAsBgB,GAAcd,EAAavC,KAAKyE,uBAAuBrF,EAAQJ,KAAK2B,QAAUC,OACpGsB,IAAgBG,EAEFzB,SAAViD,GACajD,SAATkD,IACAA,EAAO,GAEX1B,EAAOyB,GAASC,EAAO,IAEvB1B,EAAOxB,OAEXuB,EAAwBvB,SAATwB,GAAgCxB,SAAViD,CAErC,IAAIa,GAAajC,EAAkBA,EAAgBiC,WAAa9D,OAC5DF,EAAgB2C,GAAcd,GAAa,EAAO3B,OAClD+D,EAAejG,EAAEQ,QACbwB,aAAcA,EACdgE,WAAYA,EACZtC,KAAMA,EACNyB,MAAOA,EACPe,SAAUjC,EACVL,KAAMO,GACPR,GAEHwC,EAA2B,SAAUC,EAAUC,GAC3C,GAAI1B,IAAenB,EAEf,MADA4C,GAASE,YAAcD,EAChBD,CACJ,IAAItC,EAGP,MADAsC,GAASE,WAAa,EACfF,CACJ,IAAIvC,IAAcJ,EAOrB,MANA2C,GAASE,WAAa,EACtBtG,EAAEuG,KAAKH,EAASR,KAAM,WACuB,IAArCtE,KAAKoB,IAAIO,IAAI7B,QAAQ,cACrBgF,EAASE,YAAc,KAGxBF,CACJ,IAAIvC,EAAW,CAClB,GAAI2C,GAAoBxG,EAAEQ,QAASwB,cAAc,EAAOyE,OAAQ,UAAY9C,EAC5E,OAAOsB,GAAYxD,KAAKG,EAAKhB,GAAI4F,GAC5B3D,KAAK,SAAU6D,GACZ,MAAI/B,IACAyB,EAASE,WAAaI,EAAYd,KAAKC,OAChCO,IAEXA,EAASE,WAAaI,EAAYd,KAAKC,OAChCO,KAGnB,KAAM,IAAIrG,OAAMM,MAAMgB,OAAO,6DAA8DO,EAAKd,cAGxGuE,KAAsBxC,KAAK,SAAUwD,GAC7B,MAAOpB,GAAYxD,KAAKG,EAAKhB,GAAIqF,GAC5BpD,KAAK,SAAUuD,GACZ,MAAOD,GAAyBC,EAAUC,OAGrDxD,KAAK,SAAUuD,GACZ1F,EAAQiG,QAAQP,KAPxBf,SASW,SAAU/B,GACb5C,EAAQkG,MAAMtD,EAAKA,EAAIuD,OAAQvD,MAM3Cd,iBAIAsE,MAAO,SAAUC,EAAMzG,EAAMI,EAASsG,GAClC,GAAIpF,GAAON,KAEP2F,EAAW,GAAIjH,GAAEkH,SACjBC,EAAcF,EAASG,UACvBC,EAAsB,WAClBJ,EAASzB,SACT,IAAI8B,GAAQ1F,EAAKY,cAAcpB,QAAQ+F,EACvCvF,GAAKY,cAAc+E,OAAOD,EAAO,GAGzChG,MAAKkB,cAAcd,KAAKyF,GAExBH,EAAUvF,KAAKH,KAAMhB,GAChBuC,KAAK,SAAUuD,GACZ9F,EAAK4C,KAAOkD,EAASoB,IACrB9G,EAAQiG,QAAQrG,GAChB+G,MAJRL,SAMW,SAAU1D,GACM,MAAfA,EAAIuD,QAEJY,QAAQC,IAAIrH,MAAMgB,OAAO,+CAAgD0F,EAAMzD,IAEnF5C,EAAQkG,MAAMtD,EAAKA,EAAIuD,OAAQvD,GAC/B+D,OAIZM,OAAQ,SAAUjH,GAEd,GAAIJ,GAAOI,EAAQJ,IAGE,SAAjBgB,KAAKT,UACLP,EAAK2C,IAAMnD,EAAa8H,kBAAkBtH,EAAKgB,KAAKT,WAGxDS,KAAKwF,MAAM,SAAUxG,EAAMI,EAAS,SAAUmH,GAC1C,MAAOvG,MAAKV,GAAGkH,IAAID,MAK3BE,OAAQ,SAAUrH,GAEd,GAAIJ,GAAOI,EAAQJ,IAEnBgB,MAAKwF,MAAM,SAAUxG,EAAMI,EAAS,SAAUmH,GAC1C,MAAOvG,MAAKV,GAAGkH,IAAID,MAK3BG,QAAS,SAAUtH,GAEf,GAAIJ,GAAOI,EAAQJ,IAEnBgB,MAAKwF,MAAM,UAAWxG,EAAMI,EAAS,SAAUmH,GAC3C,MAAOvG,MAAKV,GAAGqH,OAAOJ,MAK9BvD,eAAgB,SAAUrC,GACtB,OAAQA,IAAWA,EAAOiG,SAAqC,IAA1BjG,EAAOiG,QAAQrC,QAGxDtB,iBAAkB,SAAUtC,GACxB,IAAKA,GAAoC,IAA1BA,EAAOiG,QAAQrC,OAC1B,OAAO,CAEX,IAAIsC,GAAclG,EAAOiG,QAAQ,GAAGE,MAChCC,EAAiBpG,EAAOiG,QAAQ,GAAGI,QAEvC,OAAoB,QAAhBH,GAAyBA,IAAgB7G,KAAKT,SACvC,GAGH,KAAM,MAAO,KAAM,MAAO,KAAM,OAAOO,QAAQiH,IAAmB,GAG9E5D,aAAc,SAAUb,GACpB,OAAQA,GAAwB,IAAhBA,EAAKiC,QAGzBnB,UAAW,SAAUd,GACjB,IAAKA,GAAwB,IAAhBA,EAAKiC,OACd,OAAO,CAEX,IAAIuC,GAAQxE,EAAK,GAAGwE,KACpB,OAAiB,QAAVA,GAAmBA,IAAU9G,KAAKT,SAK7CmD,2BAA4B,SAAUJ,GAClC,GAAIwE,GAAOpC,EAAYjB,EAAWhE,EAAcO,KAAKP,WAErD,IAAIO,KAAKmD,aAAab,GAClB,OAASmB,UAAWhE,EAAaiF,YAAY,EAGjD,IAAIpC,EAAKiC,OAAS,EACd,KAAM,IAAI9F,OAAM,mEAKpB,IAFAiG,EAAapC,EAAK,GAAG2E,KAAuB,SAAhB3E,EAAK,GAAG2E,IAEhCjH,KAAKoD,UAAUd,GACf,OAASmB,UAAWhE,EAAaiF,WAAYA,EAMjD,IAHAoC,EAAQxE,EAAK,GAAGwE,MAChBrD,EAAYzD,KAAKN,WAAWoH,IAEvBrD,EACD,KAAM,IAAIhF,OAAM,4CAA8CqI,EAAQ,IAG1E,QAASrD,UAAWA,EAAWiB,WAAYA,IAG/CF,gBAAiB,SAAU7D,EAAQ2B,GAC/B,GAAK3B,GAAoC,IAA1BA,EAAOiG,QAAQrC,OAA9B,CAIA,GAAIqC,GAAUjG,EAAOiG,OAErB,IAAI5G,KAAKR,cAAgBb,EAAaC,UAAW,CAC7C,GAAIgI,EAAQrC,OAAS,EACjB,KAAM,IAAI9F,OAAM,8CAGpB,IAAIoI,GAAcD,EAAQ,GAAGE,MACzBI,EAAY5E,GAAQA,EAAKiC,OAAS,EAAIjC,EAAK,GAAGwE,MAAQ9G,KAAKT,OAE/D,IAAI2H,GAAaL,EACb,KAAM,IAAIpI,OAAM,6EAEbuB,MAAKR,cAAgBb,EAAaE,cAKjD4F,uBAAwB,SAAU9D,GAC9B,GAAIX,KAAKgD,eAAerC,GACpB,MAAOC,OAGX,IAA8B,IAA1BD,EAAOiG,QAAQrC,OACf,KAAM,IAAI9F,OAAM,4DAGpB,IAAIoI,GAAclG,EAAOiG,QAAQ,GAAGE,MAChCC,EAAiBpG,EAAOiG,QAAQ,GAAGI,SACnCG,EAAeN,IAAgB7G,KAAKT,SAA2B,QAAhBsH,EAAyBrI,EAAa8H,kBAAkB3F,EAAOiG,QAAQ,GAAGQ,OAASzG,EAAOiG,QAAQ,GAAGQ,KAExJ,KAAK,MAAO,MAAMtH,QAAQiH,IAAmB,EACzC,KAAM,IAAItI,OAAMM,MAAMgB,OAAO,0DAA2DgH,EAAgBF,GAG5G,QAAQE,GACR,IAAK,KACD,OAASM,IAAKF,EAClB,KAAK,KACD,OAAS/C,OAAQ+C,EAAaG,eAAe,EACjD,KAAK,MACD,OAASlD,OAAQ+C,EAAaG,eAAe,EACjD,KAAK,MACD,OAASnD,SAAUgD,GAEvB,MAAOvG,SAIX2G,kBAAmB,SAAUT,GACzB,MAAQA,KAAU9G,KAAKT,QAAW,MAAQuH,GAI9CU,kBAAmB,SAAUV,EAAOM,GAChC,MAAc,QAAVN,GAAmBA,IAAU9G,KAAKT,QAC3Bf,EAAa8H,kBAAkBc,GAEnCA,GAIXxE,2BAA4B,SAAUjC,EAAQ2B,GAC1C,GAAIhC,GAAON,IACX,OAAIA,MAAKgD,eAAerC,IAAW2B,GAAQA,EAAKiC,OAAS,GAIjDkD,KAAM/I,EAAEkB,IAAI0C,EAAM,SAAUA,GACxB,GAAIwE,GAAQxG,EAAKiH,kBAAkBjF,EAAKwE,OACpCY,IAEJ,OADAA,GAAWZ,IAAWa,SAAW,GAC1BD,KAIZ1H,KAAK4H,mCAAmCjH,EAAQ2B,IAI3DsF,mCAAoC,SAAUjH,EAAQ2B,GAClD3B,EAASA,KACT,IAAIL,GAAON,KACPqE,KACAwD,EAAQlH,EAAOkH,OAAS,MACxBjB,EAAUjG,EAAOiG,YACjBkB,EAAgC,QAAVD,EAAkB,OAAS,MACjDE,KACAC,EAAkB,SAAUhB,GACxB,OAAQA,GACR,IAAK,KACD,MAAO,KACX,KAAK,MACD,MAAO,KACX,KAAK,KACD,MAAO,KACX,KAAK,MACD,MAAO,MACX,KAAK,KACD,MAAO,KACX,KAAK,MACD,MAAO,MAOX,SACI,KAAM,IAAIvI,OAAMM,MAAMgB,OAAO,iDAAkDiH,KAwB3F,OApBAtI,GAAEuG,KAAK2B,EAAS,SAAUZ,EAAOrF,GAC7B,GAEIqG,GACAiB,EACAC,EAJApB,EAAQxG,EAAKiH,kBAAkB5G,EAAOmG,OACtCM,EAAQ9G,EAAKkH,kBAAkB7G,EAAOmG,MAAOnG,EAAOyG,MAKpDzG,GAAOiG,QACPqB,EAAY3H,EAAKsC,2BAA2BjC,EAAQ2B,IAEpD2F,KACAjB,EAAWgB,EAAgBrH,EAAOqG,UAClCkB,KACAA,EAASlB,GAAYI,EACrBa,EAAUnB,GAASoB,GAGvBH,EAAW3H,KAAK6H,KAGM,IAAtBF,EAAWxD,OACJ3D,QAGXyD,EAAOyD,GAAuBC,EAEvB1D,IAGXvB,qBAAsB,SAAUR,GAC5B,GAAIhC,GAAON,IACX,OAAIA,MAAKmD,aAAab,GACX1B,OAEJlC,EAAEkB,IAAI0C,EAAM,SAAU8E,GACzB,GAAIe,KAEJ,OADAA,GAAM7H,EAAKiH,kBAAkBH,EAAMN,QAAwB,SAAdM,EAAMH,IAAiB,OAAS,MACtEkB,OAMnBC,GACA3C,KAAM,OACNzG,KAAM,SAAUA,GACZ,GAAIA,EAAKsF,KAAM,CAEX,GAAI+D,GAAO3J,EAAEkB,IAAIZ,EAAKsF,KAAM,SAAUgE,GAClC,MAAwC,KAApCA,EAAIlH,IAAIO,IAAI7B,QAAQ,YACbwI,EAAIlH,IAERR,QAEX,OAAOyH,GACJ,MAAIrJ,GAAKqJ,KAELrJ,EAAKqJ,KAETrJ,GAEXuJ,MAAO,SAAUvJ,GACb,MAAOA,GAAKgG,YAIpBtG,GAAEQ,QAAO,EAAMH,MAAMC,MACjBwJ,SACInJ,QAAS+I,GAEbK,YACIpJ,QAASP,IASjB,IAAI4J,GAAsB3J,MAAMC,KAAK2J,WAAWzJ,QAE5CC,KAAM,SAAUC,GACZ,GAAIA,GAAWA,EAAQqG,MAAyB,YAAjBrG,EAAQqG,KAAoB,CACvD,GAAiBmD,EAOjB,IALAxJ,EAAUV,EAAEQ,QAAO,KAAUE,GAG7BY,KAAK6I,YAAa,EAEdzJ,EAAQ0J,QAAU1J,EAAQ0J,OAAOC,OAAS3J,EAAQ0J,OAAOC,MAAM7I,IAAMd,EAAQ0J,OAAOC,MAAM7I,aAAcnB,OAAMC,KAAK4J,OAEnH,GADAA,EAAQxJ,EAAQ0J,OAAOC,MACD,QAAlBH,EAAMrJ,QACN,KAAM,IAAId,OAAM,8CAapB,IARAW,EAAUV,EAAEQ,QAAO,GACf4J,QACIC,OACIC,GAAI,SAGb5J,GAE6B,QAA5BA,EAAQ0J,OAAOC,MAAMC,GACrB,KAAM,IAAIvK,OAAM,gEAYxB,IANAW,EAAQ6J,aAAwCrI,SAAzBxB,EAAQ6J,cAA6B,EAAO7J,EAAQ6J,aAC3E7J,EAAQ8J,gBAA8CtI,SAA5BxB,EAAQ8J,iBAAgC,EAAO9J,EAAQ8J,gBACjF9J,EAAQ+J,cAA0CvI,SAA1BxB,EAAQ+J,eAA8B,EAAO/J,EAAQ+J,cAC7E/J,EAAQgK,eAA4CxI,SAA3BxB,EAAQgK,gBAA+B,EAAOhK,EAAQgK,eAC/EhK,EAAQiK,iBAAgDzI,SAA7BxB,EAAQiK,kBAAiC,EAAOjK,EAAQiK,iBAE/EjK,EAAQJ,KACR,KAAM,IAAIP,OAAM,oEAIpBW,GAAQJ,MAEJiB,WAAYD,MAKpBjB,MAAMC,KAAK2J,WAAWzI,GAAGf,KAAKmC,MAAMtB,KAAMsJ,YAI9CC,aAAc,SAAUP,GACpB,MAAIhJ,MAAK6I,WACE9J,MAAMC,KAAK2J,WAAWzI,GAAGwB,IAAIvB,KAAKH,KAAMxB,EAAa8H,kBAAkB0C,IAE3EjK,MAAMC,KAAK2J,WAAWzI,GAAGwB,IAAIJ,MAAMtB,KAAMsJ,aAMxDZ,GAAoBrC,OAAStH,MAAMC,KAAK2J,WAAWtC,OAGnDtH,MAAMC,KAAK0J,oBAAsBA,GAElCc,OAAOzK,MAAM0K,QAETD,OAAOzK,OAEE,kBAAVT,SAAwBA,OAAOoL,IAAMpL,OAAS,SAAUqL,EAAGtL,GAAKA,EAAEmL,OAAOjL,QAASiL,OAAOhL"}